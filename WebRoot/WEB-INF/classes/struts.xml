<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
	 "-//Apache Software Foundation//DTD Struts Configuration 2.1//EN" 
	 "http://struts.apache.org/dtds/struts-2.1.dtd">
<!-- 指定struts2配置文件的根元素 -->
<struts>
	<constant name="struts.enable.DynamicMethodInvocation" value="false" />
	<constant name="struts.devMode" value="false" /> 
	<constant name="struts.action.extension" value="action"/>	
	
	<include file="struts-default.xml" />
	
	<!-- 配置第一个包，该包名为user，继承sturts-default -->
	<!-- 用户管理模块 -->
	<package name="user" extends="struts-default" >
		<!-- 定义全部的拦截器 -->
		<interceptors>
			<!-- 通过指定拦截器名和拦截器实现类来定义拦截器 -->
			<interceptor name="loginInterceptor" class="com.qufenqi.interceptor.LoginInterceptor"/>
			<!-- 定义一个包含包含权限检查的拦截器栈 -->
			<interceptor-stack name="wall">
				<!-- 定义拦截器栈包含的默认拦截器 -->
				<interceptor-ref name="defaultStack"/>
				<!-- 定义拦截器栈包含的自定义拦截器 -->
				<interceptor-ref name="loginInterceptor"/>
			</interceptor-stack>
		</interceptors>
		
		<action name="login" class="loginAction" method="login">
			<result name="success">index.jsp</result>
			<result name="error">login.jsp</result>
			<result name="input">input.jsp</result>
		</action>
		<action name="quit" class="loginAction" method="quit">
			<result name="success">login.jsp</result>
			<result name="error">login.jsp</result>
			<result name="login">login.jsp</result>
			<!-- 应用自定义拦截器 -->
			<interceptor-ref name="wall"/>
		</action>
		
		<action name="*" class="loginAction" method="{1}">
			<result name="success">/index.jsp</result>
			<result name="error">login.jsp</result>
			<result name="login">login.jsp</result>
			<interceptor-ref name="wall"/>
		</action>
		<action name="query" class="loginAction" method="query">
			<result name="success">update.jsp</result>
			<result name="error">login.jsp</result>
			<result name="login">login.jsp</result>
			<interceptor-ref name="wall"/>
		</action>
		<action name="register" class="loginAction" method="register">
			<result name="success">login.jsp</result>
			<result name="error">register.jsp</result>
			<result name="login">login.jsp</result>
		</action>
	</package>
	
	<package name="goods" extends="struts-default" namespace="/goods">
		<action name="searchGoods" class="goodsAction" method="searchGoods">
			<result name="success">test_goods.jsp</result>
		</action>
		
		<action name="queryOneGoods" class="goodsAction" method="queryOneGoods">
			<result name="success">index.jsp</result>
		</action>
		
		<action name="buyGoods" class="goodsAction" method="buyGoods">
			<result name="success">index.jsp</result>
		</action>
	</package>
</struts>    
